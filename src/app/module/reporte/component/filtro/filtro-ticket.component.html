<p-drawer (onHide)="cerrarComponente()" [(visible)]="visible" position="right"
          styleClass="!w-full md:!w-80 lg:!w-[30rem]">
  <ng-template #header>
    <div class="flex items-center gap-2">
      <span class="font-semibold"> <i class="pi pi-filter mr-2"></i>Filtros de consulta </span>
    </div>
  </ng-template>
  <form (ngSubmit)="buscarPorFiltro()" [formGroup]="form" class="space-y-4" method="get">
    <!-- Filtro por fecha [Desde-Hasta] de registro -->
    <div class="grid grid-cols-1 gap-2">
      <div class="grid grid-cols-2 gap-2">
        <div>
          <label class="font-medium block">Desde</label>
          <p-datePicker [maxDate]="hoy" [showButtonBar]="true" dateFormat="dd/mm/yy" formControlName="desde"
                        inputId="desde" styleClass="w-full"/>
        </div>
        <div>
          <label class="font-medium block">Hasta</label>
          <p-datePicker [maxDate]="hoy" [showButtonBar]="true" dateFormat="dd/mm/yy" formControlName="hasta"
                        inputId="hasta" styleClass="w-full"/>
        </div>
      </div>
    </div>

    <!-- Filtro por zona -->
    <div>
      <label class="font-medium">Zona</label>
      <p-select [checkmark]="true" [loading]="!zonas()" [options]="zonas()" [showClear]="true" formControlName="zona"
                optionLabel="nombre"
                styleClass="w-full"/>
    </div>

    <!-- Filtro por unidad -->
    <div>
      <label class="font-medium">Unidad</label>
      <p-select [checkmark]="true" [filter]="true" [loading]="!unidades()" [options]="unidades()" [showClear]="true"
                filterBy="clave,nombre"
                formControlName="unidad" optionLabel="nombre" styleClass="w-full">
        <ng-template #selectedItem let-select>
          {{ select ? select.clave + ' ' + select.nombre : '' }}
        </ng-template>
        <ng-template #item let-data>{{ data.clave }} {{ data.nombre }}</ng-template>
      </p-select>
    </div>

    <!-- Filtro por supervisor -->
    <div>
      <label class="font-medium">Supervisor</label>
      <p-select [checkmark]="true" [loading]="!supervisores()" [options]="supervisores()" [showClear]="true"
                formControlName="supervisor"
                optionLabel="nombre" styleClass="w-full"/>
    </div>

    <!-- Filtro por área de seguimiento -->
    <div>
      <label class="font-medium">Área de seguimiento</label>
      <p-select [checkmark]="true" [loading]="!areas()" [options]="areas()" [showClear]="true" formControlName="area"
                optionLabel="nombre"
                styleClass="w-full"/>
    </div>

    <!-- Filtro por estatus del reporte -->
    <div>
      <label class="font-medium">Estatus del reporte</label>
      <p-select [checkmark]="true" [loading]="!estatus()" [options]="estatus()" [showClear]="true"
                formControlName="estatus" optionLabel="nombre"
                styleClass="w-full"/>
    </div>
    <div>
      <p-checkbox [binary]="true" formControlName="publicar" inputId="ny"/>
      <label class="ml-2">Publicado</label>
    </div>
    <!-- Botones de acción -->
    <div class="flex justify-center gap-2">
      <p-button (onClick)="limpiarFiltro()" label="Limpiar filtros" severity="secondary"/>
      <p-button label="Aplicar filtros" type="submit"/>
    </div>
  </form>
</p-drawer>
