<!-- Minimalist and modern employee management UI -->
<div class="bg-white shadow-sm rounded-lg p-4 mb-4 border border-gray-100">
    <div class="flex items-center gap-3 mb-4">
        <div>
            <div class="text-2xl font-bold"><i class="pi pi-users mr-2" style="font-size: 1.5rem"></i>Administración de Empleados</div>
            <div class="text-lg text-gray-500 ">Consulta y gestión de información básica de empleados</div>
        </div>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <div
            class="bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-center gap-4 transition-all duration-300 hover:shadow-lg">
            <div class="w-12 h-12 bg-white rounded-lg flex items-center justify-center shadow-sm">
                <i class="pi pi-users text-blue-600 text-lg"></i>
            </div>
            <div>
                <div class="text-2xl font-bold text-blue-800">{{ numEmpleadosActivos }}</div>
                <div class="text-sm text-blue-600 font-medium">Empleados activos</div>
            </div>
        </div>
        <div
            class="bg-indigo-50 border border-indigo-200 rounded-lg p-4 flex items-center gap-4 transition-all duration-300 hover:shadow-lg">
            <div class="w-12 h-12 bg-white rounded-lg flex items-center justify-center shadow-sm">
                <i class="pi pi-users text-indigo-600 text-lg"></i>
            </div>
            <div>
                <div class="text-2xl font-bold text-indigo-800">{{ numEmpleadosReingreso }}</div>
                <div class="text-sm text-indigo-600 font-medium">Empleados reingresados</div>
            </div>
        </div>
        <div
            class="bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-4 transition-all duration-300 hover:shadow-lg">
            <div class="w-12 h-12 bg-white rounded-lg flex items-center justify-center shadow-sm">
                <i class="pi pi-users text-red-600 text-lg"></i>
            </div>
            <div>
                <div class="text-2xl font-bold text-red-800">{{ numEmpleadosInactivos }}</div>
                <div class="text-sm text-red-600 font-medium">Bajas de empleados</div>
            </div>
        </div>
    </div>
</div>
<p-panel [collapsed]="false" [toggleable]="true" header="Filtros" class="mb-1">
    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Buscar</label>
            <p-iconfield>
                <p-inputicon class="pi pi-search"/>
                <input (input)="dt.filterGlobal($any($event.target).value, 'contains')" [(ngModel)]="searchValue"
                       class="w-full border-gray-200 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200"
                       pInputText
                       placeholder="Buscar empleados..."/>
            </p-iconfield>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Unidad</label>
            <p-multiSelect (ngModelChange)="onUnidadChange($event)" [(ngModel)]="selectedUnidad"
                           [options]="unidades"
                           [panelStyle]="{ minWidth: '16rem' }" optionLabel="name" optionValue="code"
                           placeholder="Todas las unidades" style="width: 100%">
                <ng-template #item let-option><span>{{ option.name }}</span></ng-template>
            </p-multiSelect>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Puesto</label>
            <p-multiSelect (ngModelChange)="onPuestoChange($event)" [(ngModel)]="selectedPuesto" [options]="puestos"
                           [panelStyle]="{ minWidth: '16rem' }" optionLabel="name" optionValue="code"
                           placeholder="Todos los puestos" style="width: 100%">
                <ng-template #item let-option><span>{{ option.name }}</span></ng-template>
            </p-multiSelect>
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">Estado</label>
            <p-multiSelect (ngModelChange)="onEstatusChange($event)" [(ngModel)]="selectedEstatus"
                           [options]="estatusOptions"
                           [panelStyle]="{ minWidth: '12rem' }" optionLabel="name" optionValue="code"
                           placeholder="Todos los estados" style="width: 100%">
                <ng-template #item let-option><span>{{ option.name }}</span></ng-template>
            </p-multiSelect>
        </div>
    </div>
</p-panel>

<div class="bg-white shadow-sm rounded-lg border border-gray-100">
    <div class="p-4 border-b border-gray-100">
        <div class="flex gap-2">
            <p-button (onClick)="sincronizar()" icon="pi pi-sync" label="Sincronizar" severity="info" size="small"
                      styleClass="px-3 py-2 rounded-md transition-colors duration-200"></p-button>
            <p-button (onClick)="exportarExcel()" icon="pi pi-file-excel" label="Exportar Excel" severity="success" size="small"
                      styleClass="px-3 py-2 rounded-md transition-colors duration-200"></p-button>
        </div>
    </div>

    <p-table #dt
             [globalFilterFields]="['codigoEmpleado','puestoNombre','nombreCompleto','unidadNombreCompleto','estatus']"
             paginator="true"
             [showCurrentPageReport]="true"
             currentPageReportTemplate="Mostrando {first} a {last} de {totalRecords} entradas"
             [rows]="200"
             scrollable="true"
             [tableStyle]="{ 'min-width': '50rem' }"
             [rowsPerPageOptions]="[200,400,500,1000]"
             [value]="empleados()"
             class="border-0"
             scrollHeight="calc(100vh - 467px)"
             size="small">
        <ng-template #header>
            <tr class="bg-gray-50">
                <th class="font-medium text-gray-700 py-3 px-4">N°</th>
                <th class="font-medium text-gray-700 py-3 px-4" pSortableColumn="codigoEmpleado">
                    <p-sortIcon field="codigoEmpleado"/>
                    Código
                </th>
                <th class="font-medium text-gray-700 py-3 px-4" pSortableColumn="nombreCompleto">
                    <p-sortIcon field="nombreCompleto"/>
                    Nombre Completo
                </th>
                <th class="font-medium text-gray-700 py-3 px-4" pSortableColumn="unidadNombreCompleto">
                    <p-sortIcon field="unidadNombreCompleto"/>
                    Unidad
                </th>
                <th class="font-medium text-gray-700 py-3 px-4" pSortableColumn="puestoNombre">
                    <p-sortIcon field="puestoNombre"/>
                    Puesto
                </th>
                <th class="font-medium text-gray-700 py-3 px-4" pSortableColumn="estatus">
                    <p-sortIcon field="estatus"/>
                    Estado
                </th>
            </tr>
        </ng-template>
        <ng-template #body let-empleado let-rowIndex="rowIndex">
            <tr class="text-sm">
                <td class="py-3 px-4 font-medium text-gray-800">{{ rowIndex + 1 }}</td>
                <td style="width:8%">{{ empleado.codigoEmpleado }}</td>
                <td>{{ empleado.nombreCompleto }}</td>
                <td>{{ empleado.unidadNombreCompleto }}</td>
                <td>{{ empleado.puestoNombre }}</td>
                <td>
          <span
              class="inline-flex items-center gap-2 px-2 py-1 rounded-full text-xs font-medium {{ empleado.estatus === 'B' ? 'bg-red-100 text-red-800':'bg-green-100 text-green-800'  }}">
            <i class="pi {{ empleado.estatus === 'A' ?'pi-check-circle': 'pi-times-circle'  }}"></i>
              @switch (empleado.estatus) {
                  @case ('A') {
                      Activo
                  }
                  @case ('R') {
                      Reingreso
                  }
                  @default {
                      Baja
                  }
              }
          </span>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>
