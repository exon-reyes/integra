<div class="form-container">
    <app-info-card 
        title="Flujo de Configuración: Rol + Permisos"
        iconClass="pi pi-cog text-2xl text-indigo-600"
        [items]="infoItems">
    </app-info-card>

    <form [formGroup]="rolForm" (ngSubmit)="onSubmit()" class="space-y-6">

        <div>
            <label for="nombre" class="block text-sm font-medium text-gray-700 mb-1">Nombre <span class="text-red-500">*</span></label>
            <input pInputText id="nombre" formControlName="nombre"
                   class="w-full"
                   placeholder="Ej: Administrador, Soporte Técnico"
                   [ngClass]="{'ng-invalid ng-touched': f.nombre.invalid && f.nombre.touched}"/>

            @if (f.nombre.invalid && f.nombre.touched) {
                <small class="p-error block mt-1">
                    @if (f.nombre.errors?.['required']) {
                        Requerido.
                    }
                    @else if (f.nombre.errors?.['maxlength']) {
                        Máx. 50 caracteres.
                    }
                </small>
            }
        </div>

        <div>
            <label for="descripcion" class="block text-sm font-medium text-gray-700 mb-1">Descripción (Opcional)</label>
            <input pInputText id="descripcion" formControlName="descripcion"
                   class="w-full"
                   placeholder="Breve resumen de las funciones del rol"
                   [ngClass]="{'ng-invalid ng-touched': f.descripcion.invalid && f.descripcion.touched}"/>

            @if (f.descripcion.invalid && f.descripcion.touched) {
                <small class="p-error block mt-1">
                    Máx. 255 caracteres.
                </small>
            }
        </div>

        @if (errorMessage) {
            <div class="p-4 mb-5 text-sm text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400" role="alert">
                {{ errorMessage }}
            </div>
        }

        <div class="flex justify-end gap-3 pt-2 border-t border-gray-100">
            <p-button
                label="Cancelar"
                severity="secondary"
                icon="pi pi-times"
                (onClick)="onCancel()"
                [disabled]="loading"
                type="button">
            </p-button>

            <p-button
                label="Crear Rol"
                icon="pi pi-check"
                type="submit"
                [loading]="loading"
                [disabled]="rolForm.invalid || loading">
            </p-button>
        </div>

    </form>
</div>
